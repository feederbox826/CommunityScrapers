name: MilfVR
sceneByName:
  action: script
  script:
    - python
    - MilfVR.py
    - scene-by-name
sceneByQueryFragment:
  action: scrapeXPath
  scraper: sceneScraper
  queryURL: "{url}"

# POVR at 8810f21
xPathScrapers:
  sceneScraper:
    common:
      $info: &infoSel //div[@class="detail"]
      $url: &urlSel //link[@rel="canonical"]/@href
    scene:
      Title: &titleSel //div[@class="detail__header detail__header-lg"]/h1
      URL: //link[@rel="canonical"]/@href
      Date: &dateAttr
        selector: $info//span[@class="detail__date"]/text()
        postProcess:
          - parseDate: 2 January, 2006
      Details: &detailsAttr
        selector: //div[@class="detail__txt detail__txt-show_lg"]/text()|//span[@class="more__body"]/text()
        concat: " "
      Tags: &tagsAttr
        Name: $info//div[@class="tag-list__body"]//a/text()
      Performers: &performersAttr
        Name: //div[@class="detail__inf detail__inf-align_right"]/div[@class="detail__models"]/a/text()
      Image: &imageAttr
        selector: //meta[@property="og:image"]/@content|//div[@class="photo-strip__body"]/div[2]/@data-src
        postProcess:
          - replace:
              - regex: medium.jpg
                with: large.jpg
              # TranzVR defaults to smaller covers, but we can grab a bigger one
              - regex: 472/cover.jpg
                with: 680/cover.jpg
              # All of these domains give 403 errors when saving the scraped image
              # but povr.com has the same images and is totally cool with our scraping
              - regex: cdns-i.wankzvr.com
                with: images.povr.com/wvr
              - regex: images.tranzvr.com
                with: images.povr.com/tvr
              - regex: cdns-i.milfvr.com
                with: images.povr.com/mvr
              - regex: cdns-i.brasilvr.com
                with: images.povr.com
      Studio: &studioAttr
        Name:
          selector: *urlSel
          postProcess:
            - replace:
                - regex: ^.*//(?:www.)?([^/]*).*$
                  with: $1
            - map:
                brasilvr.com: BrasilVR
                milfvr.com: MilfVR
                tranzvr.com: TranzVR
                wankzvr.com: WankzVR
      Code: &codeAttr
        selector: *urlSel
        postProcess:
          - replace:
              - regex: ^.*-(\d+)$
                with: $1
    gallery:
      Title: *titleSel
      Date: *dateAttr
      Details: *detailsAttr
      Tags: *tagsAttr
      Performers: *performersAttr
      Studio: *studioAttr
      Code: *codeAttr